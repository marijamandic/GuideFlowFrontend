<div class="container">
  <h1 class="encounter-title">Encounters</h1>

  <div class="map-container">
    <xp-map [encounters]="encounterCoordinates" [userLocation]="userMarker" [showSearchBar]="isViewMode"></xp-map>
  </div>

  <div class="encounter-list">
    <div *ngFor="let encounter of encounters" class="encounter-card">
      <div class="encounter-header">
        <h3>{{ encounter.name }}</h3>
        <p>Status: 
          <span *ngIf="encounter.encounterStatus === 0">Active</span>
          <span *ngIf="encounter.encounterStatus === 1">Draft</span>
          <span *ngIf="encounter.encounterStatus === 2">Archived</span>
          <span *ngIf="encounter.encounterStatus === 3">Pending</span>
          <span *ngIf="encounter.encounterStatus === 4">Canceled</span>
        </p>
      </div>
      <div class="encounter-body">
        <p><strong>Description:</strong> {{ encounter.description }}</p>
      </div>
      <div *ngIf="user.role == 'administrator' && encounter.encounterStatus !== 3" class="encounter-footer">
        <button class="update-button" (click)="navigateToForm(encounter.id)">Update</button>
      </div>
      <div *ngIf="user.role == 'administrator' && encounter.encounterStatus === 3" class="encounter-footer">
        <button class="approve-button" (click)="approveEncounter(encounter.id)">Approve</button>
      </div>
      <div *ngIf="user.role == 'administrator' && encounter.encounterStatus === 3" class="encounter-footer">
        <button class="decline-button" (click)="declineEncounter(encounter.id)">Decline</button>
      </div>
      <div *ngIf="user.role == 'tourist'" class="encounter-footer">
        <button class="update-button" (click)="navigateToEncounter(encounter.id)">Execute</button>
      </div>
    </div>
  </div>

  <div *ngIf="canAddEncounter" class="add-encounter">
    <button class="add-button" (click)="navigateToForm()">Add Encounter</button>
  </div>
</div>
